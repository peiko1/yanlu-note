2025-12-12 00:00:51.183 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-12 00:00:51.184 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-12 00:00:51.196 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 10 ms
2025-12-12 00:00:51.207 [http-nio-8086-exec-1] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 1
2025-12-12 00:00:51.331 [http-nio-8086-exec-1] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1996553589358592026}, 请求类: NoteController, 请求方法: likeNote =================================== 
2025-12-12 00:00:51.694 [http-nio-8086-exec-1] WARN  c.p.x.note.biz.exception.GlobalExceptionHandler - /note/like request fail, errorCode: NOTE-20008, errorMessage: 您已经点赞过该笔记
2025-12-12 00:00:51.712 [http-nio-8086-exec-1] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 1
2025-12-12 00:01:11.277 [http-nio-8086-exec-6] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 1
2025-12-12 00:01:11.278 [http-nio-8086-exec-6] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1996553589358592026}, 请求类: NoteController, 请求方法: likeNote =================================== 
2025-12-12 00:01:11.326 [http-nio-8086-exec-6] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2025-12-12 00:01:11.505 [http-nio-8086-exec-6] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 1(Long), 1996553589358592026(Long)
2025-12-12 00:01:11.523 [http-nio-8086-exec-6] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2025-12-12 00:01:11.549 [http-nio-8086-exec-6] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 270ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2025-12-12 00:01:11.553 [http-nio-8086-exec-6] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 1
2025-12-12 00:01:11.630 [NettyClientPublicExecutor_4] INFO  c.p.x.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=0A0C2966966863947C6B38A70B960000, offsetMsgId=0A0C296600002A9F0000000001918327, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=broker-a, queueId=1], queueOffset=0]
2025-12-12 00:01:13.744 [ConsumeMessageThread_xiaohashu_group_LikeUnlikeTopic_1] INFO  c.p.x.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":1,"noteId":1996553589358592026,"type":1,"createTime":[2025,12,12,0,1,11,530567300]}, tags: Like
2025-12-12 00:05:49.577 [http-nio-8086-exec-5] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 1
2025-12-12 00:05:49.578 [http-nio-8086-exec-5] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1996553589358592026}, 请求类: NoteController, 请求方法: likeNote =================================== 
2025-12-12 00:05:49.582 [http-nio-8086-exec-5] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2025-12-12 00:05:49.583 [http-nio-8086-exec-5] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 1(Long), 1996553589358592026(Long)
2025-12-12 00:05:49.585 [http-nio-8086-exec-5] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2025-12-12 00:05:49.589 [http-nio-8086-exec-5] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 11ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2025-12-12 00:05:49.590 [http-nio-8086-exec-5] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 1
2025-12-12 00:05:49.594 [NettyClientPublicExecutor_24] INFO  c.p.x.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=0A0C2966966863947C6B38AB49960001, offsetMsgId=0A0C296600002A9F00000000019184CF, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=broker-a, queueId=1], queueOffset=1]
2025-12-12 00:05:49.595 [ConsumeMessageThread_xiaohashu_group_LikeUnlikeTopic_2] INFO  c.p.x.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":1,"noteId":1996553589358592026,"type":1,"createTime":[2025,12,12,0,5,49,587495400]}, tags: Like
2025-12-12 00:07:26.731 [http-nio-8086-exec-3] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 1
2025-12-12 00:07:26.732 [http-nio-8086-exec-3] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1996553589358592026}, 请求类: NoteController, 请求方法: likeNote =================================== 
2025-12-12 00:07:26.739 [http-nio-8086-exec-3] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2025-12-12 00:07:26.740 [http-nio-8086-exec-3] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 1(Long), 1996553589358592026(Long)
2025-12-12 00:07:26.741 [http-nio-8086-exec-3] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2025-12-12 00:07:26.746 [http-nio-8086-exec-3] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 14ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2025-12-12 00:07:26.747 [http-nio-8086-exec-3] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 1
2025-12-12 00:07:26.749 [NettyClientPublicExecutor_7] INFO  c.p.x.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=0A0C2966966863947C6B38ACC51A0002, offsetMsgId=0A0C296600002A9F0000000001918677, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=broker-a, queueId=1], queueOffset=2]
2025-12-12 00:07:26.751 [ConsumeMessageThread_xiaohashu_group_LikeUnlikeTopic_3] INFO  c.p.x.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":1,"noteId":1996553589358592026,"type":1,"createTime":[2025,12,12,0,7,26,744606900]}, tags: Like
2025-12-12 00:08:42.617 [Thread-30] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Start destroying Publisher
2025-12-12 00:08:42.617 [Thread-3] WARN  c.alibaba.nacos.common.executor.ThreadPoolManager - [ThreadPoolManager] Start destroying ThreadPool
2025-12-12 00:08:42.617 [Thread-30] WARN  com.alibaba.nacos.common.notify.NotifyCenter - [NotifyCenter] Destruction of the end
2025-12-12 00:08:42.618 [Thread-3] WARN  c.alibaba.nacos.common.executor.ThreadPoolManager - [ThreadPoolManager] Destruction of the end
2025-12-12 00:08:42.618 [Thread-32] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Start destroying common HttpClient
2025-12-12 00:08:42.618 [Thread-32] WARN  c.alibaba.nacos.common.http.HttpClientBeanHolder - [HttpClientBeanHolder] Destruction of the end
2025-12-12 00:08:42.619 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registering from Nacos Server now...
2025-12-12 00:08:42.628 [SpringApplicationShutdownHook] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - De-registration finished.
2025-12-12 00:08:49.233 [main] INFO  com.alibaba.nacos.client.logging.NacosLogging - Nacos Logging Adapter Builder: com.alibaba.nacos.logger.adapter.logback12.LogbackNacosLoggingAdapterBuilder
2025-12-12 00:08:49.236 [main] INFO  com.alibaba.nacos.client.logging.NacosLogging - Nacos Logging Adapter Builder: com.alibaba.nacos.logger.adapter.logback14.LogbackNacosLoggingAdapterBuilder
2025-12-12 00:08:49.236 [main] INFO  com.alibaba.nacos.client.logging.NacosLogging - Nacos Logging Adapter: com.alibaba.nacos.logger.adapter.logback14.LogbackNacosLoggingAdapter match ch.qos.logback.classic.Logger success.
2025-12-12 00:08:49.242 [main] INFO  com.alibaba.nacos.client.logging.NacosLogging - Nacos Logging Adapter Builder: com.alibaba.nacos.logger.adapter.log4j2.Log4j2NacosLoggingAdapterBuilder
2025-12-12 00:08:49.649 [main] INFO  c.p.xiaohashu.note.biz.XiaohashuNoteBizApplication - The following 1 profile is active: "dev"
2025-12-12 00:08:50.073 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-12-12 00:08:50.075 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-12-12 00:08:50.089 [main] INFO  o.s.d.r.config.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 5 ms. Found 0 Redis repository interfaces.
2025-12-12 00:08:50.245 [main] INFO  o.springframework.cloud.context.scope.GenericScope - BeanFactory id=a000b0b4-2b1a-3888-a547-3fb78f23cbca
2025-12-12 00:08:50.265 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.peikol.xiaohashu.distributed.id.generator.api.DistributedIdGeneratorFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.267 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.peikol.xiaohashu.kv.api.KeyValueFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.268 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'com.peikol.xiaohashu.user.api.UserFeignApi' of type [org.springframework.cloud.openfeign.FeignClientFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.400 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.ListenerContainerConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.401 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration' of type [org.apache.rocketmq.spring.autoconfigure.MessageConverterConfiguration$$SpringCGLIB$$0] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.450 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'createRocketMQMessageConverter' of type [org.apache.rocketmq.spring.support.RocketMQMessageConverter] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.452 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration' of type [org.springframework.cloud.commons.config.CommonsConfigAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.454 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.454 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'loadBalancerClientsDefaultsMappingsProvider' of type [org.springframework.cloud.client.loadbalancer.LoadBalancerDefaultMappingsProviderAutoConfiguration$$Lambda$727/0x0000024a2754ead8] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.455 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'defaultsBindHandlerAdvisor' of type [org.springframework.cloud.commons.config.DefaultsBindHandlerAdvisor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.458 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketmq-org.apache.rocketmq.spring.autoconfigure.RocketMQProperties' of type [org.apache.rocketmq.spring.autoconfigure.RocketMQProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.461 [main] INFO  o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'rocketMQMessageListenerContainerRegistrar' of type [org.apache.rocketmq.spring.support.RocketMQMessageListenerContainerRegistrar] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2025-12-12 00:08:50.596 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat initialized with port(s): 8086 (http)
2025-12-12 00:08:50.597 [main] INFO  org.apache.catalina.core.AprLifecycleListener - Loaded Apache Tomcat Native library [2.0.8] using APR version [1.7.4].
2025-12-12 00:08:50.600 [main] INFO  org.apache.catalina.core.AprLifecycleListener - OpenSSL successfully initialized [OpenSSL 3.0.14 4 Jun 2024]
2025-12-12 00:08:50.606 [main] INFO  org.apache.catalina.core.StandardService - Starting service [Tomcat]
2025-12-12 00:08:50.606 [main] INFO  org.apache.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.5]
2025-12-12 00:08:50.676 [main] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-12-12 00:08:50.676 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1013 ms
2025-12-12 00:08:51.805 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_DelayDeleteNoteRedisCacheTopic', namespace='', nameServer='127.0.0.1:9876', topic='DelayDeleteNoteRedisCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-12-12 00:08:51.805 [main] INFO  o.a.r.s.s.RocketMQMessageListenerContainerRegistrar - Register the listener to container, listenerBeanName:delayDeleteNoteRedisCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
2025-12-12 00:08:51.830 [main] INFO  c.a.d.s.b.a.DruidDataSourceAutoConfigure - Init DruidDataSource
2025-12-12 00:08:52.048 [main] INFO  com.alibaba.druid.pool.DruidDataSource - {dataSource-1} inited
2025-12-12 00:08:52.242 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-distributed-id-generator' URL not provided. Will try picking an instance via load-balancing.
2025-12-12 00:08:52.269 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-kv' URL not provided. Will try picking an instance via load-balancing.
2025-12-12 00:08:52.281 [main] INFO  o.s.cloud.openfeign.FeignClientFactoryBean - For 'xiaohashu-user' URL not provided. Will try picking an instance via load-balancing.
2025-12-12 00:08:52.597 [main] INFO  o.a.r.s.autoconfigure.RocketMQAutoConfiguration - a producer (xiaohashu_group) init on namesrv 127.0.0.1:9876
2025-12-12 00:08:53.735 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_groupDeleteNoteLocalCacheTopic', namespace='', nameServer='127.0.0.1:9876', topic='DeleteNoteLocalCacheTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=BROADCASTING', tlsEnable=false, instanceName=DEFAULT}
2025-12-12 00:08:53.735 [main] INFO  o.a.r.s.s.RocketMQMessageListenerContainerRegistrar - Register the listener to container, listenerBeanName:deleteNoteLocalCacheConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_2
2025-12-12 00:08:54.360 [main] INFO  o.a.r.s.support.DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='xiaohashu_group_LikeUnlikeTopic', namespace='', nameServer='127.0.0.1:9876', topic='LikeUnlikeTopic', consumeMode=ORDERLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING', tlsEnable=false, instanceName=DEFAULT}
2025-12-12 00:08:54.360 [main] INFO  o.a.r.s.s.RocketMQMessageListenerContainerRegistrar - Register the listener to container, listenerBeanName:likeUnlikeNoteConsumer, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_3
2025-12-12 00:08:54.937 [main] INFO  o.s.boot.web.embedded.tomcat.TomcatWebServer - Tomcat started on port(s): 8086 (http) with context path ''
2025-12-12 00:08:54.962 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.impl.NacosClientAuthServiceImpl success.
2025-12-12 00:08:54.963 [main] INFO  c.a.n.p.auth.spi.client.ClientAuthPluginManager - [ClientAuthPluginManager] Load ClientAuthService com.alibaba.nacos.client.auth.ram.RamClientAuthServiceImpl success.
2025-12-12 00:08:55.485 [main] INFO  c.a.n.common.ability.AbstractAbilityControlManager - Ready to get current node abilities...
2025-12-12 00:08:55.486 [main] INFO  c.a.n.common.ability.AbstractAbilityControlManager - Ready to initialize current node abilities, support modes: [SDK_CLIENT]
2025-12-12 00:08:55.487 [main] INFO  c.a.n.common.ability.AbstractAbilityControlManager - Initialize current abilities finish...
2025-12-12 00:08:55.487 [main] INFO  c.a.n.c.ability.discover.NacosAbilityManagerHolder - [AbilityControlManager] Successfully initialize AbilityControlManager
2025-12-12 00:08:55.515 [main] INFO  c.a.cloud.nacos.registry.NacosServiceRegistry - nacos registry, DEFAULT_GROUP xiaohashu-note 10.12.41.102:8086 register finished
2025-12-12 00:08:55.606 [main] INFO  c.p.xiaohashu.note.biz.XiaohashuNoteBizApplication - Started XiaohashuNoteBizApplication in 6.901 seconds (process running for 7.305)
2025-12-12 00:09:04.902 [http-nio-8086-exec-1] INFO  o.a.c.core.ContainerBase.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-12-12 00:09:04.902 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-12-12 00:09:04.902 [http-nio-8086-exec-1] INFO  org.springframework.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-12-12 00:09:04.912 [http-nio-8086-exec-1] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 设置 userId 到 ThreadLocal 中， 用户 ID: 1
2025-12-12 00:09:05.000 [http-nio-8086-exec-1] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求开始: [点赞笔记], 入参: {"id":1996553589358592026}, 请求类: NoteController, 请求方法: likeNote =================================== 
2025-12-12 00:09:05.343 [http-nio-8086-exec-1] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==>  Preparing: select count(1) from t_note_like where user_id = ? and note_id = ? and status = 1 limit 1
2025-12-12 00:09:05.501 [http-nio-8086-exec-1] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - ==> Parameters: 1(Long), 1996553589358592026(Long)
2025-12-12 00:09:05.523 [http-nio-8086-exec-1] DEBUG c.p.x.n.b.d.m.N.selectCountByUserIdAndNoteId - <==      Total: 1
2025-12-12 00:09:05.528 [http-nio-8086-exec-1] DEBUG c.p.x.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==>  Preparing: select note_id from t_note_like where user_id = ? and status = 1
2025-12-12 00:09:05.528 [http-nio-8086-exec-1] DEBUG c.p.x.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - ==> Parameters: 1(Long)
2025-12-12 00:09:05.530 [http-nio-8086-exec-1] DEBUG c.p.x.n.b.d.mapper.NoteLikeDOMapper.selectByUserId - <==      Total: 0
2025-12-12 00:09:05.550 [http-nio-8086-exec-1] INFO  c.p.f.b.operationlog.aspect.ApiOperationLogAspect - ====== 请求结束: [点赞笔记], 耗时: 551ms, 出参: {"success":true,"message":null,"errorCode":null,"data":null} =================================== 
2025-12-12 00:09:05.564 [http-nio-8086-exec-1] INFO  c.p.f.b.context.filter.HeaderUserId2ContextFilter - ===== 删除 ThreadLocal， userId: 1
2025-12-12 00:09:05.582 [NettyClientPublicExecutor_3] INFO  c.p.x.note.biz.service.impl.NoteServiceImpl - ==> 【笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=0A0C2966B32C63947C6B38AE47240000, offsetMsgId=0A0C296600002A9F000000000191881F, messageQueue=MessageQueue [topic=LikeUnlikeTopic, brokerName=broker-a, queueId=1], queueOffset=3]
2025-12-12 00:09:33.988 [ConsumeMessageThread_xiaohashu_group_LikeUnlikeTopic_1] INFO  c.p.x.note.biz.consumer.LikeUnlikeNoteConsumer - ==> LikeUnlikeNoteConsumer 消费了消息 {"userId":1,"noteId":1996553589358592026,"type":1,"createTime":[2025,12,12,0,9,5,537657200]}, tags: Like
2025-12-12 00:09:33.989 [ConsumeMessageThread_xiaohashu_group_LikeUnlikeTopic_1] DEBUG c.p.x.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==>  Preparing: INSERT INTO t_note_like (user_id, note_id, create_time, status) VALUES (?, ?, ?, ?) ON DUPLICATE KEY UPDATE create_time = ?, status = ?;
2025-12-12 00:09:34.065 [ConsumeMessageThread_xiaohashu_group_LikeUnlikeTopic_1] DEBUG c.p.x.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - ==> Parameters: 1(Long), 1996553589358592026(Long), 2025-12-12T00:09:05.537657200(LocalDateTime), 1(Integer), 2025-12-12T00:09:05.537657200(LocalDateTime), 1(Integer)
2025-12-12 00:09:34.084 [ConsumeMessageThread_xiaohashu_group_LikeUnlikeTopic_1] DEBUG c.p.x.n.b.d.mapper.NoteLikeDOMapper.insertOrUpdate - <==    Updates: 2
2025-12-12 00:09:34.108 [NettyClientPublicExecutor_8] INFO  c.p.x.note.biz.consumer.LikeUnlikeNoteConsumer - ==> 【计数: 笔记点赞】MQ 发送成功，SendResult: SendResult [sendStatus=SEND_OK, msgId=0A0C2966B32C63947C6B38AEB68A0001, offsetMsgId=0A0C296600002A9F00000000019189C6, messageQueue=MessageQueue [topic=CountNoteLikeTopic, brokerName=broker-a, queueId=3], queueOffset=0]
